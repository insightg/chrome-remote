services:
  chrome:
    image: lscr.io/linuxserver/chrome:latest
    container_name: chrome-remote
    environment:
      - PUID=${PUID:-1000}
      - PGID=${PGID:-1000}
      - TZ=${TZ:-Europe/Rome}
      - CHROME_CLI=${CHROME_CLI:-https://www.google.com}
    volumes:
      - ./chrome/config:/config
      - ./chrome/downloads:/config/downloads
    ports:
      - "${CHROME_PORT:-3010}:3000"
      - "${CHROME_WS_PORT:-3011}:3001"
    shm_size: "2gb"
    restart: unless-stopped
    networks:
      - chrome-network

  nginx-proxy:
    image: nginx:alpine
    container_name: chrome-nginx-proxy
    ports:
      - "${HTTPS_PORT:-8443}:443"
    volumes:
      - ./nginx/conf/default.conf:/etc/nginx/conf.d/default.conf:ro
      - ./nginx/certs:/etc/nginx/certs:ro
    depends_on:
      - chrome
    restart: unless-stopped
    networks:
      - chrome-network

networks:
  chrome-network:
    driver: bridge
